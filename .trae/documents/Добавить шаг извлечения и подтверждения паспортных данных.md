## Цель
После загрузки паспорта выполнить извлечение данных (OCR), дать пользователю подтвердить/исправить их, затем отправить PATCH и обновить паспортные данные конкретного акционера.

## Изменения в API-слое
- Добавить два метода в `src/queries/license-application.ts`:
  - `extractPassportData(applicationId, shareholderId)`: POST к новому OCR/Extract-эндпоинту из `openapi_new.json`.
  - `updateShareholderPassport(applicationId, shareholderId, payload)`: PATCH к эндпоинту обновления паспортных данных акционера.
- Не выдумывать пути и схемы: на этапе реализации распарсить `openapi_new.json` и взять точные `path`, `requestBody` и имена полей.
- Сохранить стиль текущих запросов (fetch + JSON, как в `uploadPassport` d:\projects\adlex-v2\src\queries\license-application.ts:194-215).

## Новый шаг формы: "Passport Review"
- Добавить новый шаг `passport-review` между `shareholder-details` и `payment`.
  - Обновить перечисление шагов в `src/pages/home-screen/components/types.ts` (добавить `'passport-review'`).
  - Обновить массивы `STEP_ORDER` и `STEPS` в `src/pages/home-screen/components/FormContainer.tsx` и корректные номера шагов.
- Создать компонент `StepPassportReview.tsx`:
  - На вход: список акционеров (с их `shareholder_id`) и сведения по загруженным паспортам.
  - Для каждого акционера:
    - Кнопка "Extract" (или автоматический вызов при входе на шаг): вызывает `extractPassportData` и заполняет поля: номер паспорта, ФИО, дата рождения, гражданство, дата выдачи/окончания и др. (точный список возьмём из `openapi_new.json`).
    - Показать форму с извлечёнными значениями, давая возможность редактировать.
    - Кнопка "Re-extract" для повторного OCR.
  - Кнопка "Confirm & Save" по всему шагу: вызывает `updateShareholderPassport` (PATCH) для всех акционеров с подтверждёнными значениями.

## Обновления существующей логики
- В `HomeScreen` (d:\projects\adlex-v2\src\pages\home-screen\index.tsx):
  - В `handleNext()` после шага `shareholder-details` сначала выполняется сохранение акционеров через `updateLicenseApplication` (уже есть), затем загрузка паспортов (`uploadPassport`) — строки d:\projects\adlex-v2\src\pages\home-screen\index.tsx:175-196.
  - После успешной загрузки паспортов вместо перехода сразу к `payment` — перейти на новый шаг `passport-review`.
  - На шаге `passport-review` по нажатию "Next" вызвать PATCH для каждого акционера и затем перейти к `payment`.
- Валидация перехода:
  - В `canGoNext()` для `passport-review` убедиться, что все акционеры подтверждены и есть заполненные обязательные поля (конкретику возьмём из `openapi_new.json`).

## UI в деталях
- В `StepShareholderDetails.tsx` (d:\projects\adlex-v2\src\pages\home-screen\components\steps\StepShareholderDetails.tsx):
  - Оставить текущую загрузку файла пользователем с прогрессом.
  - Не выполнять OCR здесь, чтобы не ломать текущую модель: OCR будет централизован на шаге `passport-review`.
- Новый `StepPassportReview.tsx`:
  - Список карточек акционеров с полями паспорта.
  - Состояния: `loading`, `error` на уровне каждого акционера.
  - Возможность ручного редактирования полей перед подтверждением.

## Типы данных
- Расширить `ShareholderData` временными полями для UI: `extracted_passport?: { ... }`, `is_passport_confirmed?: boolean` — эти поля не будут отправляться в `updateLicenseApplication`; только в PATCH `updateShareholderPassport`.
- Точные названия полей для PATCH взять из схемы `openapi_new.json`.

## Обработка ошибок и UX
- Если OCR упал: показать сообщение об ошибке с возможностью повторить.
- Если PATCH не прошёл: отобразить ошибку и позволить исправить/повторить.
- Переход на следующий шаг блокировать, пока у всех акционеров статус подтверждения не `true`.

## Верификация
- Протестировать последовательность:
  1) Заполнить акционеров → Next → `updateLicenseApplication`.
  2) Загрузить паспорта (выполняется в `handleNext`) → перейти на `passport-review`.
  3) Выполнить `extract` для каждого → отредактировать → Confirm & Save (PATCH).
  4) Перейти к `payment` и убедиться, что в бекенде паспортные данные обновлены.
- Логи проверки через баннер ошибки в `FormContainer` (см. d:\projects\adlex-v2\src\pages\home-screen\components\FormContainer.tsx:161-190).

## Что я сделаю при подтверждении
1) Распарсю `openapi_new.json` и зафиксирую точные эндпоинты/схемы.
2) Добавлю методы `extractPassportData` и `updateShareholderPassport` в queries.
3) Вставлю новый шаг `passport-review` в навигацию и типы.
4) Реализую `StepPassportReview.tsx` с UI подтверждения.
5) Обновлю `handleNext()` для перехода на `passport-review` и выполнения PATCH.
6) Покрою базовой валидацией и обработкой ошибок на каждом этапе.

Готов приступить сразу после подтверждения плана.