{"openapi":"3.1.0","info":{"title":"Adlex API","version":"1.0.0"},"paths":{"/api/v1/activities":{"get":{"tags":["Business Activities"],"summary":"List Activities","description":"List all non-regulated business activities with pagination.","operationId":"list_activities_api_v1_activities_get","parameters":[{"name":"activity_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by type: Trade, Service","title":"Activity Type"},"description":"Filter by type: Trade, Service"},{"name":"license_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by license type","title":"License Type"},"description":"Filter by license type"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Offset for pagination","default":0,"title":"Offset"},"description":"Offset for pagination"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Limit for pagination","default":50,"title":"Limit"},"description":"Limit for pagination"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessActivitiesListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activities/search":{"get":{"tags":["Business Activities"],"summary":"Search Activities","description":"Search for business activities by name.","operationId":"search_activities_api_v1_activities_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":2,"description":"Search query","title":"Q"},"description":"Search query"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum results","default":20,"title":"Limit"},"description":"Maximum results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BusinessActivity"},"title":"Response Search Activities Api V1 Activities Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activities/{activity_id}":{"get":{"tags":["Business Activities"],"summary":"Get Activity","description":"Get activity by IFZA ID.","operationId":"get_activity_api_v1_activities__activity_id__get","parameters":[{"name":"activity_id","in":"path","required":true,"schema":{"type":"string","title":"Activity Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessActivity"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activities/sync":{"post":{"tags":["Business Activities"],"summary":"Sync From Ifza","description":"Sync business activities from IFZA API.\n\nFetches all non-regulated (TPA=false) activities and stores them in database.","operationId":"sync_from_ifza_api_v1_activities_sync_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncResponse"}}}}}}},"/api/v1/license-application/":{"post":{"tags":["License Application"],"summary":"Create new license application","description":"Create a new empty license application draft.","operationId":"create_application_api_v1_license_application__post","parameters":[{"name":"session_id","in":"query","required":true,"schema":{"type":"string","description":"Session ID for the application","title":"Session Id"},"description":"Session ID for the application"}],"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseApplicationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/{application_id}":{"get":{"tags":["License Application"],"summary":"Get license application","description":"Get license application by ID with validation status.","operationId":"get_application_api_v1_license_application__application_id__get","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseApplicationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["License Application"],"summary":"Update license application","description":"Partial update of license application.\n\n    You can send any combination of fields:\n    - Only business_activities\n    - Only company_name_1, company_name_2, company_name_3\n    - Only visa_package_quantity\n    - Only number_of_shareholders and total_shares\n    - Only shareholders\n    - Or any combination\n\n    When updating shareholders, the entire list is replaced.","operationId":"update_application_api_v1_license_application__application_id__patch","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseApplicationInput"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseApplicationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["License Application"],"summary":"Delete draft application","description":"Delete a draft license application. Only drafts can be deleted.","operationId":"delete_application_api_v1_license_application__application_id__delete","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/{application_id}/shareholders/{shareholder_id}/passport":{"post":{"tags":["License Application"],"summary":"Upload passport scan","description":"Upload passport scan for a shareholder. Allowed formats: PDF, JPG, PNG. Max size: 10MB.","operationId":"upload_passport_api_v1_license_application__application_id__shareholders__shareholder_id__passport_post","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}},{"name":"shareholder_id","in":"path","required":true,"schema":{"type":"string","title":"Shareholder Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_passport_api_v1_license_application__application_id__shareholders__shareholder_id__passport_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PassportUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["License Application"],"summary":"Get passport download URL","description":"Get a presigned URL to download the passport scan. URL expires in 1 hour by default.","operationId":"get_passport_url_api_v1_license_application__application_id__shareholders__shareholder_id__passport_get","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}},{"name":"shareholder_id","in":"path","required":true,"schema":{"type":"string","title":"Shareholder Id"}},{"name":"expires_in","in":"query","required":false,"schema":{"type":"integer","maximum":86400,"minimum":60,"description":"URL expiration time in seconds","default":3600,"title":"Expires In"},"description":"URL expiration time in seconds"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PassportUrlResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/{application_id}/submit":{"post":{"tags":["License Application"],"summary":"Submit to IFZA","description":"Submit the license application to IFZA. Requires all fields to be filled and all passports uploaded.","operationId":"submit_to_ifza_api_v1_license_application__application_id__submit_post","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_upload_passport_api_v1_license_application__application_id__shareholders__shareholder_id__passport_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"Passport scan file"}},"type":"object","required":["file"],"title":"Body_upload_passport_api_v1_license_application__application_id__shareholders__shareholder_id__passport_post"},"BusinessActivitiesListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/BusinessActivity"},"type":"array","title":"Items"}},"type":"object","required":["total","items"],"title":"BusinessActivitiesListResponse","description":"API response for activities list."},"BusinessActivity":{"properties":{"id":{"type":"string","title":"Id","description":"IFZA Activity ID"},"code":{"type":"string","title":"Code","description":"Activity code"},"name":{"type":"string","title":"Name","description":"Activity name"},"description":{"type":"string","title":"Description","description":"Activity description","default":""},"is_regulated":{"type":"boolean","title":"Is Regulated","description":"Requires TPA approval","default":false},"license_type":{"type":"string","title":"License Type","description":"DED License Type","default":""},"activity_type":{"type":"string","title":"Activity Type","description":"Trade/Service/etc.","default":""},"status":{"type":"string","title":"Status","description":"Activity status","default":"Active"},"category":{"type":"string","title":"Category","description":"Activity category","default":""}},"type":"object","required":["id","code","name"],"title":"BusinessActivity","description":"Internal business activity model."},"BusinessActivityInput":{"properties":{"activity_id":{"type":"integer","title":"Activity Id","description":"Activity ID from business_activities table"},"is_main":{"type":"boolean","title":"Is Main","description":"Is this the main activity","default":false}},"type":"object","required":["activity_id"],"title":"BusinessActivityInput","description":"Input for selecting a business activity from database."},"BusinessActivityResponse":{"properties":{"activity_id":{"type":"integer","title":"Activity Id"},"activity_code":{"type":"string","title":"Activity Code"},"name":{"type":"string","title":"Name"},"is_main":{"type":"boolean","title":"Is Main"}},"type":"object","required":["activity_id","activity_code","name","is_main"],"title":"BusinessActivityResponse","description":"Response schema for business activity."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LicenseApplicationInput":{"properties":{"business_activities":{"anyOf":[{"items":{"$ref":"#/components/schemas/BusinessActivityInput"},"type":"array","maxItems":3,"minItems":1},{"type":"null"}],"title":"Business Activities","description":"Business activities (1-3)"},"company_name_1":{"anyOf":[{"type":"string","maxLength":255,"minLength":2},{"type":"null"}],"title":"Company Name 1","description":"Company name option 1"},"company_name_2":{"anyOf":[{"type":"string","maxLength":255,"minLength":2},{"type":"null"}],"title":"Company Name 2","description":"Company name option 2"},"company_name_3":{"anyOf":[{"type":"string","maxLength":255,"minLength":2},{"type":"null"}],"title":"Company Name 3","description":"Company name option 3"},"visa_package_quantity":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Visa Package Quantity","description":"Number of visa packages"},"number_of_shareholders":{"anyOf":[{"type":"integer","maximum":50.0,"minimum":1.0},{"type":"null"}],"title":"Number Of Shareholders","description":"Number of shareholders"},"total_shares":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Total Shares","description":"Total number of shares"},"shareholders":{"anyOf":[{"items":{"$ref":"#/components/schemas/ShareholderInput"},"type":"array"},{"type":"null"}],"title":"Shareholders","description":"List of shareholders (replaces existing)"}},"type":"object","title":"LicenseApplicationInput","description":"Input schema for creating/updating a license application.\n\nAll fields are optional to support partial updates via PATCH."},"LicenseApplicationResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"session_id":{"type":"string","title":"Session Id"},"status":{"$ref":"#/components/schemas/LicenseApplicationStatus"},"business_activities":{"anyOf":[{"items":{"$ref":"#/components/schemas/BusinessActivityResponse"},"type":"array"},{"type":"null"}],"title":"Business Activities"},"company_name_1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Name 1"},"company_name_2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Name 2"},"company_name_3":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Name 3"},"visa_package_quantity":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Visa Package Quantity"},"number_of_shareholders":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Number Of Shareholders"},"total_shares":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Shares"},"shareholders":{"items":{"$ref":"#/components/schemas/ShareholderResponse"},"type":"array","title":"Shareholders","default":[]},"completion_percentage":{"type":"integer","title":"Completion Percentage","default":0},"validation_errors":{"items":{"type":"string"},"type":"array","title":"Validation Errors","default":[]},"is_ready_to_submit":{"type":"boolean","title":"Is Ready To Submit","default":false},"ifza_draft_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ifza Draft Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","session_id","status","created_at","updated_at"],"title":"LicenseApplicationResponse","description":"Response schema for license application."},"LicenseApplicationStatus":{"type":"string","enum":["draft","submitted","in_progress","approved","rejected"],"title":"LicenseApplicationStatus","description":"Status of a license application."},"PassportUploadResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"shareholder_id":{"type":"string","title":"Shareholder Id"},"document_id":{"type":"string","title":"Document Id"},"filename":{"type":"string","title":"Filename"},"file_size":{"type":"integer","title":"File Size"}},"type":"object","required":["success","shareholder_id","document_id","filename","file_size"],"title":"PassportUploadResponse","description":"Response schema for passport upload."},"PassportUrlResponse":{"properties":{"shareholder_id":{"type":"string","title":"Shareholder Id"},"download_url":{"type":"string","title":"Download Url"},"expires_in":{"type":"integer","title":"Expires In"}},"type":"object","required":["shareholder_id","download_url","expires_in"],"title":"PassportUrlResponse","description":"Response schema for passport download URL."},"ShareholderInput":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"Shareholder email"},"phone":{"type":"string","maxLength":50,"minLength":5,"title":"Phone","description":"Phone number"},"number_of_shares":{"type":"integer","exclusiveMinimum":0.0,"title":"Number Of Shares","description":"Number of shares owned"},"roles":{"items":{"$ref":"#/components/schemas/ShareholderRole"},"type":"array","minItems":1,"title":"Roles","description":"Roles in the company (can have multiple)"},"residential_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Residential Address","description":"Residential address"},"is_uae_resident":{"type":"boolean","title":"Is Uae Resident","description":"Is UAE resident","default":false},"is_pep":{"type":"boolean","title":"Is Pep","description":"Is Politically Exposed Person","default":false}},"type":"object","required":["email","phone","number_of_shares","roles"],"title":"ShareholderInput","description":"Input for shareholder data."},"ShareholderResponse":{"properties":{"id":{"type":"string","title":"Id"},"email":{"type":"string","title":"Email"},"phone":{"type":"string","title":"Phone"},"number_of_shares":{"type":"integer","title":"Number Of Shares"},"roles":{"items":{"type":"string"},"type":"array","title":"Roles"},"residential_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Residential Address"},"is_uae_resident":{"type":"boolean","title":"Is Uae Resident"},"is_pep":{"type":"boolean","title":"Is Pep"},"passport_uploaded":{"type":"boolean","title":"Passport Uploaded"},"passport_document_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Passport Document Id"}},"type":"object","required":["id","email","phone","number_of_shares","roles","residential_address","is_uae_resident","is_pep","passport_uploaded","passport_document_id"],"title":"ShareholderResponse","description":"Response schema for shareholder (stored as JSON)."},"ShareholderRole":{"type":"string","enum":["Shareholder","General Manager","Director","Secretary"],"title":"ShareholderRole","description":"Role of a shareholder in the company."},"SubmitResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"ifza_draft_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ifza Draft Id"},"message":{"type":"string","title":"Message"},"validation_errors":{"items":{"type":"string"},"type":"array","title":"Validation Errors","default":[]}},"type":"object","required":["success","message"],"title":"SubmitResponse","description":"Response schema for submit to IFZA."},"SyncResponse":{"properties":{"total_fetched":{"type":"integer","title":"Total Fetched","description":"Total activities from API"},"non_regulated_count":{"type":"integer","title":"Non Regulated Count","description":"Non-regulated activities count"},"new_count":{"type":"integer","title":"New Count","description":"New activities added"},"updated_count":{"type":"integer","title":"Updated Count","description":"Activities updated"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","description":"Errors during sync"}},"type":"object","required":["total_fetched","non_regulated_count","new_count","updated_count"],"title":"SyncResponse","description":"Result of sync operation."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}