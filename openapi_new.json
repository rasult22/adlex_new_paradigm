{"openapi":"3.1.0","info":{"title":"Adlex API","version":"1.0.0"},"paths":{"/api/v1/activities":{"get":{"tags":["Business Activities"],"summary":"List Activities","description":"List all non-regulated business activities with pagination.","operationId":"list_activities_api_v1_activities_get","parameters":[{"name":"activity_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by type: Trade, Service","title":"Activity Type"},"description":"Filter by type: Trade, Service"},{"name":"license_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by license type","title":"License Type"},"description":"Filter by license type"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Offset for pagination","default":0,"title":"Offset"},"description":"Offset for pagination"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Limit for pagination","default":50,"title":"Limit"},"description":"Limit for pagination"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessActivitiesListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activities/search":{"get":{"tags":["Business Activities"],"summary":"Search Activities","description":"Search for business activities by name.","operationId":"search_activities_api_v1_activities_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":2,"description":"Search query","title":"Q"},"description":"Search query"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum results","default":20,"title":"Limit"},"description":"Maximum results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BusinessActivity"},"title":"Response Search Activities Api V1 Activities Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activities/{activity_id}":{"get":{"tags":["Business Activities"],"summary":"Get Activity","description":"Get activity by IFZA ID.","operationId":"get_activity_api_v1_activities__activity_id__get","parameters":[{"name":"activity_id","in":"path","required":true,"schema":{"type":"string","title":"Activity Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessActivity"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activities/sync":{"post":{"tags":["Business Activities"],"summary":"Sync From Ifza","description":"Sync business activities from IFZA API.\n\nFetches all non-regulated (TPA=false) activities and stores them in database.","operationId":"sync_from_ifza_api_v1_activities_sync_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncResponse"}}}}}}},"/api/v1/activities/search/semantic":{"get":{"tags":["Business Activities"],"summary":"Semantic Search Activities","description":"Semantic search for business activities.\n\nSearch using natural language description of the business.\nReturns activities ranked by semantic similarity.\n\nExample queries:\n- \"selling furniture and home interior solutions\"\n- \"IT consulting and software development\"\n- \"restaurant and food delivery services\"","operationId":"semantic_search_activities_api_v1_activities_search_semantic_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":3,"maxLength":500,"description":"Natural language business description","title":"Q"},"description":"Natural language business description"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Maximum results","default":10,"title":"Limit"},"description":"Maximum results"},{"name":"min_score","in":"query","required":false,"schema":{"type":"number","maximum":1,"minimum":0,"description":"Minimum similarity score","default":0.3,"title":"Min Score"},"description":"Minimum similarity score"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SemanticSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activities/embeddings/generate":{"post":{"tags":["Business Activities"],"summary":"Generate Embeddings","description":"Generate embeddings for all business activities.\n\nAdmin endpoint to initialize or refresh the semantic search index.\nShould be called after syncing activities from IFZA API.","operationId":"generate_embeddings_api_v1_activities_embeddings_generate_post","parameters":[{"name":"force","in":"query","required":false,"schema":{"type":"boolean","description":"Force regenerate all embeddings","default":false,"title":"Force"},"description":"Force regenerate all embeddings"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingGenerationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/":{"post":{"tags":["License Application"],"summary":"Create new license application","description":"Create a new empty license application draft.","operationId":"create_application_api_v1_license_application__post","parameters":[{"name":"session_id","in":"query","required":true,"schema":{"type":"string","description":"Session ID for the application","title":"Session Id"},"description":"Session ID for the application"}],"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseApplicationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/{application_id}":{"get":{"tags":["License Application"],"summary":"Get license application","description":"Get license application by ID with validation status.","operationId":"get_application_api_v1_license_application__application_id__get","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseApplicationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["License Application"],"summary":"Update license application","description":"Partial update of license application.\n\n    You can send any combination of fields:\n    - Only business_activities\n    - Only company_name_1, company_name_2, company_name_3\n    - Only visa_package_quantity\n    - Only number_of_shareholders and total_shares\n    - Only shareholders\n    - Or any combination\n\n    When updating shareholders, the entire list is replaced.","operationId":"update_application_api_v1_license_application__application_id__patch","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseApplicationInput"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseApplicationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["License Application"],"summary":"Delete draft application","description":"Delete a draft license application. Only drafts can be deleted.","operationId":"delete_application_api_v1_license_application__application_id__delete","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/{application_id}/shareholders/{shareholder_id}/passport":{"post":{"tags":["License Application"],"summary":"Upload passport scan","description":"Upload passport scan for a shareholder. Allowed formats: PDF, JPG, PNG. Max size: 10MB.","operationId":"upload_passport_api_v1_license_application__application_id__shareholders__shareholder_id__passport_post","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}},{"name":"shareholder_id","in":"path","required":true,"schema":{"type":"string","title":"Shareholder Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_passport_api_v1_license_application__application_id__shareholders__shareholder_id__passport_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PassportUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["License Application"],"summary":"Get passport download URL","description":"Get a presigned URL to download the passport scan. URL expires in 1 hour by default.","operationId":"get_passport_url_api_v1_license_application__application_id__shareholders__shareholder_id__passport_get","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}},{"name":"shareholder_id","in":"path","required":true,"schema":{"type":"string","title":"Shareholder Id"}},{"name":"expires_in","in":"query","required":false,"schema":{"type":"integer","maximum":86400,"minimum":60,"description":"URL expiration time in seconds","default":3600,"title":"Expires In"},"description":"URL expiration time in seconds"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PassportUrlResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/{application_id}/shareholders/{shareholder_id}/passport/extract":{"post":{"tags":["License Application"],"summary":"Extract passport data","description":"Extract passport data from uploaded scan using AI vision. Returns extracted data for verification.","operationId":"extract_passport_data_api_v1_license_application__application_id__shareholders__shareholder_id__passport_extract_post","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}},{"name":"shareholder_id","in":"path","required":true,"schema":{"type":"string","title":"Shareholder Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PassportExtractionResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/{application_id}/shareholders/{shareholder_id}/passport-data":{"get":{"tags":["License Application"],"summary":"Get passport data","description":"Get extracted passport data for a shareholder.","operationId":"get_passport_data_api_v1_license_application__application_id__shareholders__shareholder_id__passport_data_get","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}},{"name":"shareholder_id","in":"path","required":true,"schema":{"type":"string","title":"Shareholder Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/PassportExtractedData"},{"type":"null"}],"title":"Response Get Passport Data Api V1 License Application  Application Id  Shareholders  Shareholder Id  Passport Data Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["License Application"],"summary":"Update passport data","description":"Update/correct extracted passport data. Only provided fields will be updated.","operationId":"update_passport_data_api_v1_license_application__application_id__shareholders__shareholder_id__passport_data_patch","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}},{"name":"shareholder_id","in":"path","required":true,"schema":{"type":"string","title":"Shareholder Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PassportDataInput"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PassportExtractedData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/license-application/{application_id}/submit":{"post":{"tags":["License Application"],"summary":"Submit to IFZA","description":"Submit the license application to IFZA. Requires all fields to be filled and all passports uploaded.","operationId":"submit_to_ifza_api_v1_license_application__application_id__submit_post","parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Application Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/register":{"post":{"tags":["Authentication"],"summary":"Register new user","description":"Register a new user account.","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegisterRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWithTokensResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Login","description":"Authenticate user and get tokens.","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWithTokensResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh tokens","description":"Refresh access token using refresh token.","operationId":"refresh_tokens_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["Authentication"],"summary":"Logout","description":"Logout (revoke refresh token).","operationId":"logout_api_v1_auth_logout_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout-all":{"post":{"tags":["Authentication"],"summary":"Logout from all devices","description":"Logout from all devices (revoke all refresh tokens).","operationId":"logout_all_api_v1_auth_logout_all_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["Authentication"],"summary":"Get current user","description":"Get current authenticated user profile.","operationId":"get_me_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/v1/auth/change-password":{"post":{"tags":["Authentication"],"summary":"Change password","description":"Change current user's password.","operationId":"change_password_api_v1_auth_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agent/chat/stream":{"post":{"tags":["agent"],"summary":"Chat Stream","operationId":"chat_stream_api_v1_agent_chat_stream_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_upload_passport_api_v1_license_application__application_id__shareholders__shareholder_id__passport_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"Passport scan file"}},"type":"object","required":["file"],"title":"Body_upload_passport_api_v1_license_application__application_id__shareholders__shareholder_id__passport_post"},"BusinessActivitiesListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/BusinessActivity"},"type":"array","title":"Items"}},"type":"object","required":["total","items"],"title":"BusinessActivitiesListResponse","description":"API response for activities list."},"BusinessActivity":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Id","description":"Activity ID"},"ifza_id":{"type":"string","title":"Ifza Id","description":"IFZA Activity ID"},"code":{"type":"string","title":"Code","description":"Activity code"},"name":{"type":"string","title":"Name","description":"Activity name"},"description":{"type":"string","title":"Description","description":"Activity description","default":""},"is_regulated":{"type":"boolean","title":"Is Regulated","description":"Requires TPA approval","default":false},"license_type":{"type":"string","title":"License Type","description":"DED License Type","default":""},"activity_type":{"type":"string","title":"Activity Type","description":"Trade/Service/etc.","default":""},"status":{"type":"string","title":"Status","description":"Activity status","default":"Active"},"category":{"type":"string","title":"Category","description":"Activity category","default":""}},"type":"object","required":["ifza_id","code","name"],"title":"BusinessActivity","description":"Internal business activity model."},"BusinessActivityInput":{"properties":{"activity_id":{"type":"integer","title":"Activity Id","description":"Activity ID from business_activities table"},"is_main":{"type":"boolean","title":"Is Main","description":"Is this the main activity","default":false}},"type":"object","required":["activity_id"],"title":"BusinessActivityInput","description":"Input for selecting a business activity from database."},"BusinessActivityResponse":{"properties":{"activity_id":{"type":"integer","title":"Activity Id"},"activity_code":{"type":"string","title":"Activity Code"},"name":{"type":"string","title":"Name"},"is_main":{"type":"boolean","title":"Is Main"}},"type":"object","required":["activity_id","activity_code","name","is_main"],"title":"BusinessActivityResponse","description":"Response schema for business activity."},"ChangePasswordRequest":{"properties":{"current_password":{"type":"string","title":"Current Password"},"new_password":{"type":"string","maxLength":100,"minLength":8,"title":"New Password"}},"type":"object","required":["current_password","new_password"],"title":"ChangePasswordRequest","description":"Change password request."},"EmbeddingGenerationResponse":{"properties":{"status":{"type":"string","title":"Status"},"total_activities":{"type":"integer","title":"Total Activities"},"embeddings_created":{"type":"integer","title":"Embeddings Created"},"embeddings_updated":{"type":"integer","title":"Embeddings Updated"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors"}},"type":"object","required":["status","total_activities","embeddings_created","embeddings_updated"],"title":"EmbeddingGenerationResponse","description":"Response for embedding generation endpoint."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LicenseApplicationInput":{"properties":{"business_activities":{"anyOf":[{"items":{"$ref":"#/components/schemas/BusinessActivityInput"},"type":"array","maxItems":3,"minItems":1},{"type":"null"}],"title":"Business Activities","description":"Business activities (1-3)"},"company_name_1":{"anyOf":[{"type":"string","maxLength":255,"minLength":2},{"type":"null"}],"title":"Company Name 1","description":"Company name option 1"},"company_name_2":{"anyOf":[{"type":"string","maxLength":255,"minLength":2},{"type":"null"}],"title":"Company Name 2","description":"Company name option 2"},"company_name_3":{"anyOf":[{"type":"string","maxLength":255,"minLength":2},{"type":"null"}],"title":"Company Name 3","description":"Company name option 3"},"visa_package_quantity":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Visa Package Quantity","description":"Number of visa packages"},"number_of_shareholders":{"anyOf":[{"type":"integer","maximum":50.0,"minimum":1.0},{"type":"null"}],"title":"Number Of Shareholders","description":"Number of shareholders"},"total_shares":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Total Shares","description":"Total number of shares"},"shareholders":{"anyOf":[{"items":{"$ref":"#/components/schemas/ShareholderInput"},"type":"array"},{"type":"null"}],"title":"Shareholders","description":"List of shareholders (replaces existing)"}},"type":"object","title":"LicenseApplicationInput","description":"Input schema for creating/updating a license application.\n\nAll fields are optional to support partial updates via PATCH."},"LicenseApplicationResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"session_id":{"type":"string","title":"Session Id"},"status":{"$ref":"#/components/schemas/LicenseApplicationStatus"},"business_activities":{"anyOf":[{"items":{"$ref":"#/components/schemas/BusinessActivityResponse"},"type":"array"},{"type":"null"}],"title":"Business Activities"},"company_name_1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Name 1"},"company_name_2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Name 2"},"company_name_3":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Name 3"},"visa_package_quantity":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Visa Package Quantity"},"number_of_shareholders":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Number Of Shareholders"},"total_shares":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Shares"},"shareholders":{"items":{"$ref":"#/components/schemas/ShareholderResponse"},"type":"array","title":"Shareholders","default":[]},"completion_percentage":{"type":"integer","title":"Completion Percentage","default":0},"validation_errors":{"items":{"type":"string"},"type":"array","title":"Validation Errors","default":[]},"is_ready_to_submit":{"type":"boolean","title":"Is Ready To Submit","default":false},"ifza_draft_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ifza Draft Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","session_id","status","created_at","updated_at"],"title":"LicenseApplicationResponse","description":"Response schema for license application."},"LicenseApplicationStatus":{"type":"string","enum":["draft","submitted","in_progress","approved","rejected"],"title":"LicenseApplicationStatus","description":"Status of a license application."},"MessageResponse":{"properties":{"message":{"type":"string","title":"Message"},"success":{"type":"boolean","title":"Success","default":true}},"type":"object","required":["message"],"title":"MessageResponse","description":"Simple message response."},"PassportDataInput":{"properties":{"passport_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Passport Number"},"issue_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Issue Date"},"expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry Date"},"country_of_issue":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country Of Issue"},"place_of_issue":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Place Of Issue"},"date_of_birth":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date Of Birth"},"country_of_birth":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country Of Birth"},"nationality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nationality"},"gender":{"anyOf":[{"type":"string","enum":["Male","Female"]},{"type":"null"}],"title":"Gender"},"prefix":{"anyOf":[{"type":"string","enum":["Mr.","Ms.","Mrs."]},{"type":"null"}],"title":"Prefix"},"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"verified":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Verified"}},"type":"object","title":"PassportDataInput","description":"Input schema for updating/correcting passport data."},"PassportDataResponse":{"properties":{"passport_number":{"type":"string","title":"Passport Number"},"issue_date":{"type":"string","title":"Issue Date"},"expiry_date":{"type":"string","title":"Expiry Date"},"country_of_issue":{"type":"string","title":"Country Of Issue"},"place_of_issue":{"type":"string","title":"Place Of Issue"},"date_of_birth":{"type":"string","title":"Date Of Birth"},"country_of_birth":{"type":"string","title":"Country Of Birth"},"nationality":{"type":"string","title":"Nationality"},"gender":{"type":"string","title":"Gender"},"prefix":{"type":"string","title":"Prefix"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"verified":{"type":"boolean","title":"Verified","default":false}},"type":"object","required":["passport_number","issue_date","expiry_date","country_of_issue","place_of_issue","date_of_birth","country_of_birth","nationality","gender","prefix","first_name","last_name"],"title":"PassportDataResponse","description":"Embedded passport data in shareholder response."},"PassportExtractedData":{"properties":{"passport_number":{"type":"string","title":"Passport Number","description":"Passport document number"},"issue_date":{"type":"string","format":"date","title":"Issue Date","description":"Passport issue date"},"expiry_date":{"type":"string","format":"date","title":"Expiry Date","description":"Passport expiry date"},"country_of_issue":{"type":"string","title":"Country Of Issue","description":"Country that issued the passport (full name)"},"place_of_issue":{"type":"string","title":"Place Of Issue","description":"Place/city where passport was issued"},"date_of_birth":{"type":"string","format":"date","title":"Date Of Birth","description":"Date of birth"},"country_of_birth":{"type":"string","title":"Country Of Birth","description":"Country of birth (full name)"},"nationality":{"type":"string","title":"Nationality","description":"Nationality (full country name)"},"gender":{"type":"string","enum":["Male","Female"],"title":"Gender","description":"Gender"},"prefix":{"type":"string","enum":["Mr.","Ms.","Mrs."],"title":"Prefix","description":"Name prefix/title"},"first_name":{"type":"string","title":"First Name","description":"First name(s)"},"middle_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Middle Name","description":"Middle name(s)"},"last_name":{"type":"string","title":"Last Name","description":"Last name/surname"},"confidence_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence Score","description":"OCR confidence score","default":0.8},"verified":{"type":"boolean","title":"Verified","description":"Whether data was verified by user","default":false}},"type":"object","required":["passport_number","issue_date","expiry_date","country_of_issue","place_of_issue","date_of_birth","country_of_birth","nationality","gender","prefix","first_name","last_name"],"title":"PassportExtractedData","description":"Extracted passport data for IFZA submission."},"PassportExtractionResult":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether extraction was successful"},"data":{"anyOf":[{"$ref":"#/components/schemas/PassportExtractedData"},{"type":"null"}],"description":"Extracted data if successful"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","description":"Error messages if failed"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings","description":"Warning messages"}},"type":"object","required":["success"],"title":"PassportExtractionResult","description":"Result of passport data extraction."},"PassportUploadResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"shareholder_id":{"type":"string","title":"Shareholder Id"},"document_id":{"type":"string","title":"Document Id"},"filename":{"type":"string","title":"Filename"},"file_size":{"type":"integer","title":"File Size"}},"type":"object","required":["success","shareholder_id","document_id","filename","file_size"],"title":"PassportUploadResponse","description":"Response schema for passport upload."},"PassportUrlResponse":{"properties":{"shareholder_id":{"type":"string","title":"Shareholder Id"},"download_url":{"type":"string","title":"Download Url"},"expires_in":{"type":"integer","title":"Expires In"}},"type":"object","required":["shareholder_id","download_url","expires_in"],"title":"PassportUrlResponse","description":"Response schema for passport download URL."},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest","description":"Refresh token request."},"SemanticSearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/SemanticSearchResultItem"},"type":"array","title":"Results"},"total":{"type":"integer","title":"Total"},"query":{"type":"string","title":"Query"}},"type":"object","required":["results","total","query"],"title":"SemanticSearchResponse","description":"Response for semantic search endpoint."},"SemanticSearchResultItem":{"properties":{"activity":{"$ref":"#/components/schemas/BusinessActivity"},"similarity_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Similarity Score","description":"Similarity score 0-1"}},"type":"object","required":["activity","similarity_score"],"title":"SemanticSearchResultItem","description":"Single semantic search result."},"ShareholderInput":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"Shareholder email"},"phone":{"type":"string","maxLength":50,"minLength":5,"title":"Phone","description":"Phone number"},"number_of_shares":{"type":"integer","exclusiveMinimum":0.0,"title":"Number Of Shares","description":"Number of shares owned"},"roles":{"items":{"$ref":"#/components/schemas/ShareholderRole"},"type":"array","minItems":1,"title":"Roles","description":"Roles in the company (can have multiple)"},"residential_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Residential Address","description":"Residential address"},"is_uae_resident":{"type":"boolean","title":"Is Uae Resident","description":"Is UAE resident","default":false},"is_pep":{"type":"boolean","title":"Is Pep","description":"Is Politically Exposed Person","default":false}},"type":"object","required":["email","phone","number_of_shares","roles"],"title":"ShareholderInput","description":"Input for shareholder data."},"ShareholderResponse":{"properties":{"id":{"type":"string","title":"Id"},"email":{"type":"string","title":"Email"},"phone":{"type":"string","title":"Phone"},"number_of_shares":{"type":"integer","title":"Number Of Shares"},"roles":{"items":{"type":"string"},"type":"array","title":"Roles"},"residential_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Residential Address"},"is_uae_resident":{"type":"boolean","title":"Is Uae Resident"},"is_pep":{"type":"boolean","title":"Is Pep"},"passport_uploaded":{"type":"boolean","title":"Passport Uploaded"},"passport_document_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Passport Document Id"},"passport_data":{"anyOf":[{"$ref":"#/components/schemas/PassportDataResponse"},{"type":"null"}]}},"type":"object","required":["id","email","phone","number_of_shares","roles","residential_address","is_uae_resident","is_pep","passport_uploaded","passport_document_id"],"title":"ShareholderResponse","description":"Response schema for shareholder (stored as JSON)."},"ShareholderRole":{"type":"string","enum":["Shareholder","General Manager","Director","Secretary"],"title":"ShareholderRole","description":"Role of a shareholder in the company."},"SubmitResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"ifza_draft_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ifza Draft Id"},"message":{"type":"string","title":"Message"},"validation_errors":{"items":{"type":"string"},"type":"array","title":"Validation Errors","default":[]}},"type":"object","required":["success","message"],"title":"SubmitResponse","description":"Response schema for submit to IFZA."},"SyncResponse":{"properties":{"total_fetched":{"type":"integer","title":"Total Fetched","description":"Total activities from API"},"non_regulated_count":{"type":"integer","title":"Non Regulated Count","description":"Non-regulated activities count"},"new_count":{"type":"integer","title":"New Count","description":"New activities added"},"updated_count":{"type":"integer","title":"Updated Count","description":"Activities updated"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","description":"Errors during sync"}},"type":"object","required":["total_fetched","non_regulated_count","new_count","updated_count"],"title":"SyncResponse","description":"Result of sync operation."},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"}},"type":"object","required":["access_token","refresh_token","expires_in"],"title":"TokenResponse","description":"Token response after login/refresh."},"UserLoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserLoginRequest","description":"User login request."},"UserRegisterRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","maxLength":100,"minLength":8,"title":"Password"},"first_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Last Name"},"phone":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Phone"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id","description":"Session ID to link existing data to new user"}},"type":"object","required":["email","password"],"title":"UserRegisterRequest","description":"User registration request."},"UserResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"email":{"type":"string","title":"Email"},"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"role":{"$ref":"#/components/schemas/UserRole"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"last_login_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login At"}},"type":"object","required":["id","email","first_name","last_name","phone","role","is_active","created_at","last_login_at"],"title":"UserResponse","description":"User profile response."},"UserRole":{"type":"string","enum":["admin","user","support"],"title":"UserRole","description":"User roles in the system."},"UserWithTokensResponse":{"properties":{"user":{"$ref":"#/components/schemas/UserResponse"},"tokens":{"$ref":"#/components/schemas/TokenResponse"}},"type":"object","required":["user","tokens"],"title":"UserWithTokensResponse","description":"User with tokens (for registration/login)."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}